<!doctype html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!-- Consider adding a manifest.appcache: h5bp.com/d/Offline -->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
	<title>soma-template by soundstep</title>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="chrome=1">
	<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
	<link rel="icon" type="image/png" href="favicon.png">
	<link rel="stylesheet" href="assets/gh-buttons/gh-buttons.css">
	<link rel="stylesheet" href="assets/styles/pygment/native.css">
	<link rel="stylesheet" href="assets/styles/styles.css">
	<script src="assets/js/libs/respond.js"></script>
	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<link rel="shortcut icon" href="../assets/common/images/favicon.ico">
	<link rel="apple-touch-icon" href="../assets/common/images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="../assets/common/images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="../assets/common/images/apple-touch-icon-114x114.png">

	<script type="text/javascript">

		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-36294101-3']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();

	</script>

</head>
<body>

<div class="wrapper">
	<header>
		<h1><a href="./">soma.js</a></h1>

		<p>Scalable javascript framework</p>

		<ul>
			<li><a href="https://github.com/somajs/somajs/zipball/master">Download <strong>ZIP File</strong></a></li>
			<li><a href="https://github.com/somajs/somajs/tarball/master">Download <strong>TAR Ball</strong></a></li>
			<li><a href="https://github.com/somajs/somajs">View On <strong>GitHub</strong></a></li>
		</ul>

	</header>

	<div id="navigation">
		<nav>
			<ul>
				<li><a href="#what-is-soma-js">What is soma.js?</a></li>
				<li><a href="#download">Download</a></li>
				<li><a href="#quick-start">Quick start</a></li>
				<li><a href="#loose-coupling">Loose coupling</a></li>
				<li><a href="#application-instance">Application instance</a></li>
				<li><a href="#core-elements">Core elements</a></li>
				<li>
					<p><a href="#dependency-injection">Dependency injection</a><p>
					<ul class="hidden">
						<li><a href="#what-is-dependency-injection">What is dependency injection?</a></li>
						<li><a href="#using-dependency-injection-in-somajs">Using dependency injection in soma.js</a></li>
						<li><a href="https://github.com/soundstep/infuse.js" target="_blank">infuse.js</a></li>
					</ul>
				</li>
				<li><a href="#entities">Entities</a></li>
				<li><a href="#communication">Communication</a></li>
				<li><a href="#command">Command</a></li>
				<li><a href="#template">Template</a></li>
				<li><a href="#oop">OOP</a></li>
				<li><a href="#plugins">Plugins</a></li>
				<li><a href="#tools">Tools</a></li>
				<li><a href="#demos">Demos</a></li>
				<li><a href="#tests">Tests</a></li>
				<li><a href="#browser-support">Browser support</a></li>
				<!--<li><p><a href="#application-instance">Application instance</a></p>-->
					<!--<ul class="hidden">-->
						<!--<li><a href="#targeting-a-dom-element">Targeting a DOM element</a></li>-->
						<!--<li><a href="#bootstrapping-from-a-dom-element">Bootstrapping from a DOM element</a></li>-->
						<!--<li><a href="#providing-a-string">Providing a string</a></li>-->
						<!--<li><a href="#using-a-script-tag">Using a script tag</a></li>-->
					<!--</ul>-->
				<!--</li>-->
		</nav>
		<footer>
			<p>
				<a href="https://twitter.com/soundstep" target="_blank">@soundstep</a><br/>
				<a href="http://www.soundstep.com" target="_blank">www.soundstep.com</a>
			</p>

			<p>
				<small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a>
				</small>
			</p>
		</footer>
	</div>

	<section>

		<div class="title">
			<h1>What is soma.js?</h1>
			<a class="anchor" name="what-is-soma-js"></a>
		</div>


		<p>soma.js is a framework created to build scalable and maintainable javascript applications.</p>

		<p>The success to build large-scale applications will rely on smaller single-purposed parts of a larger system. soma.js provides tools to create a <a href="http://en.wikipedia.org/wiki/Loose_coupling" target="_blank">loosely-coupled</a> architecture broken down into smaller pieces.</p>
		<p>The different components of an application can be modules, models, views, plugins or widgets. soma.js will not dictate its own structure, the framework can be used as a <a href="http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller" target="_blank">model-view-controller</a> framework, can be used to create independent modules, sandboxed widgets or anything that will fit a specific need.</p>
		<p>For a system to grow and be maintainable, its parts must have a very limited knowledge of their surrounding. The components must not be tied to each other (<a href="http://en.wikipedia.org/wiki/Law_of_Demeter" target="_blank">Law of Demeter</a>), in order to be re-usable, interchangeable and allow the system to scale up.</p>
		<p>soma.js is a set of tools and design patterns to build a long term architecture that are decoupled and easily testable. The tools provided by the framework are <a href="http://en.wikipedia.org/wiki/Dependency_injection" target="_blank">dependency injection</a>, <a href="http://en.wikipedia.org/wiki/Observer_pattern" target="_blank">observer pattern</a>, <a href="http://en.wikipedia.org/wiki/Mediator_pattern" target="_blank">mediator pattern</a>, <a href="http://en.wikipedia.org/wiki/Facade_pattern" target="_blank">facade pattern</a>, <a href="http://en.wikipedia.org/wiki/Command_pattern" target="_blank">command pattern</a>, <a href="http://en.wikipedia.org/wiki/Object-oriented_programming" target="_blank">OOP</a> utilities and a DOM manipulation template engine as an optional plugin.</p>

		<div class="back"><a href="#">top</a></div>

	</section>

	<section>

		<div class="title">
			<h1>Download</h1>
			<a class="anchor" name="download"></a>
		</div>

		<h3>Browser</h3>
		<p><a href="https://github.com/soundstep/soma-template/tree/master/build" class="button icon tag" target="_blank">download soma.js</a></p>
		<p>You can also download a <a href="https://github.com/somajs/somajs/zipball/master">zip file</a> containing everything. Finally, add the script to your page:</p>
		<div class="highlight"><pre><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;soma.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span></pre></div>
		<h3>Node.js</h3>
		<div class="highlight"><pre><span class="nx">$</span> <span class="nx">npm</span> <span class="nx">install</span> <span class="nx">soma.js</span></pre></div>
		<div class="highlight"><pre><span class="kd">var</span> <span class="nx">template</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;soma.js&quot;</span><span class="p">);</span></pre></div>
		<div class="back"><a href="#">top</a></div>

	</section>

	<section>

		<div class="title">
			<h1>Quick start</h1>
			<a class="anchor" name="quick-start"></a>
		</div>

		<p>Here is a example of what a soma.js application could look like. In this case, following the MVC pattern.</p>
		<p>The application contains a model that holds data, a template that manipulate a DOM element and an application instance that hook them up. The application instance must extend a framework function, while the other entities (model and template) are plain javascript free of framework code.</p>
		<p>The template function receives a template instance, a DOM element and the model, using dependency injection.</p>

		<div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;app&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;h1&gt;</span><span class="cp">{{</span><span class="nv">content</span><span class="cp">}}</span><span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;script&gt;</span>

  <span class="c1">// function model containing data (text to display)</span>
  <span class="kd">var</span> <span class="nx">Model</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="s2">&quot;Hello world!&quot;</span>
  <span class="p">};</span>

  <span class="c1">// function template that will update the DOM</span>
  <span class="kd">var</span> <span class="nx">Template</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">template</span><span class="p">,</span> <span class="nx">scope</span><span class="p">,</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">model</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">scope</span><span class="p">.</span><span class="nx">content</span> <span class="o">=</span> <span class="nx">model</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
    <span class="nx">template</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
  <span class="p">};</span>

  <span class="c1">// application function</span>
  <span class="kd">var</span> <span class="nx">QuickStartApplication</span> <span class="o">=</span> <span class="nx">soma</span><span class="p">.</span><span class="nx">Application</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
    <span class="nx">init</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// model mapping rule so it can be injected in the template</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">injector</span><span class="p">.</span><span class="nx">mapClass</span><span class="p">(</span><span class="s2">&quot;model&quot;</span><span class="p">,</span> <span class="nx">Model</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
      <span class="c1">// create a template for a specific DOM element</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">createTemplate</span><span class="p">(</span><span class="nx">Template</span><span class="p">,</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;.app&#39;</span><span class="p">));</span>
    <span class="p">}</span>
  <span class="p">});</span>

  <span class="c1">// create application</span>
  <span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">QuickStartApplication</span><span class="p">();</span>

<span class="nt">&lt;/script&gt;</span>
</pre></div>

		<p><a href="http://plnkr.co/edit/UqqsbcqHZGM9aWzgPV50?p=preview"class="button icon edit" target="_blank">try it yourself</a></p>

		<div class="back"><a href="#">top</a></div>

	</section>

	<section>

		<div class="title">
			<h1>Loose coupling</h1>
			<a class="anchor" name="loose-coupling"></a>
		</div>

		<p></p>
		<div class="back"><a href="#">top</a></div>

	</section>

	<section>

		<div class="title">
			<h1>Application instance</h1>
			<a class="anchor" name="application-instance"></a>
		</div>

		<p>The first step to build a soma.js application is to create an application instance. This is the only moment a framework function has to be extended, all the other entities can be re-usable plain javascript function, and framework agnostic.</p>
		<p>The application instance will execute two functions so you can setup the architecture needed: the init and the start functions.</p>
		<p>Here are different syntax to create an application instance.</p>

		<div class="highlight"><pre><span class="kd">var</span> <span class="nx">MyApplication</span> <span class="o">=</span> <span class="nx">soma</span><span class="p">.</span><span class="nx">Application</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">init</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;init&#39;</span><span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">start</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;start&#39;</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MyApplication</span><span class="p">();</span>
</pre></div>

		<div class="highlight"><pre><span class="kd">var</span> <span class="nx">MyApplication</span> <span class="o">=</span> <span class="nx">soma</span><span class="p">.</span><span class="nx">Application</span><span class="p">.</span><span class="nx">extend</span><span class="p">();</span>

<span class="nx">MyApplication</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">init</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;init&#39;</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">MyApplication</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">start</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;start&#39;</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MyApplication</span><span class="p">();</span>
</pre></div>

		<div class="highlight"><pre><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">soma</span><span class="p">.</span><span class="nx">Application</span><span class="p">();</span></pre></div>

		<p>The constructor of an application can be overridden to implement your own. The "parent" constructor will have to be called so the framework can bootstrap. Click here to <a href="https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call" target="_blank">learn more about chaining constructor</a>.</p>

		<div class="highlight"><pre><span class="kd">var</span> <span class="nx">MyApplication</span> <span class="o">=</span> <span class="nx">soma</span><span class="p">.</span><span class="nx">Application</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">constructor</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">param</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">param</span> <span class="o">=</span> <span class="nx">param</span><span class="p">;</span>
    <span class="nx">soma</span><span class="p">.</span><span class="nx">Application</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">init</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;init with param:&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">param</span><span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">start</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;start&#39;</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MyApplication</span><span class="p">(</span><span class="s2">&quot;my application parameter&quot;</span><span class="p">);</span>
</pre></div>

		<div class="back"><a href="#">top</a></div>

	</section>

	<section>

		<div class="title">
			<h1>Core elements</h1>
			<a class="anchor" name="core-elements"></a>
		</div>

		<p>The framework core elements to help you build your own structure are the following:</p>
		<ul>
			<li>Dependency injection (injector property)</li>
			<li>Observer pattern (dispatcher property)</li>
			<li>Command pattern (commands property)</li>
			<li>Mediator pattern (mediators property)</li>
			<li>Facade pattern (instance property)</li>
		</ul>
		<p>They are available in the application or in other entities using dependency injection.</p>
		<p>Here is how to get their references in the application instance.</p>

		<div class="highlight"><pre><span class="kd">var</span> <span class="nx">MyApplication</span> <span class="o">=</span> <span class="nx">soma</span><span class="p">.</span><span class="nx">Application</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">init</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">injector</span><span class="p">;</span> <span class="c1">// dependency injection pattern</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">dispatcher</span><span class="p">;</span> <span class="c1">// observer pattern</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">commands</span><span class="p">;</span> <span class="c1">// command pattern</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">mediators</span><span class="p">;</span> <span class="c1">// mediator pattern</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">instance</span><span class="p">;</span> <span class="c1">// facade pattern</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div>

		<p>Here are two different syntax to get their references in other entities. The injector will either send the core elements in the constructor or set the corresponding properties.</p>

		<div class="highlight"><pre><span class="kd">var</span> <span class="nx">Entity</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">injector</span><span class="p">,</span> <span class="nx">dispatcher</span><span class="p">,</span> <span class="nx">commands</span><span class="p">,</span> <span class="nx">mediators,</span> <span class="nx">instance</span><span class="p">)</span> <span class="p">{</span>

<span class="p">};</span>
</pre></div>

		<div class="highlight"><pre><span class="kd">var</span> <span class="nx">Entity</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">injector</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">dispatcher</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">commands</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">mediators</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">instance</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>

		<div class="back"><a href="#">top</a></div>

	</section>

	<section>

		<div class="title">
			<h1>Dependency injection</h1>
			<a class="anchor" name="dependency-injection"></a>
		</div>

		<p><a href="https://github.com/soundstep/infuse.js" target="_blank">infuse.js</a> is the dependency injection library developed for soma.js, <a href="https://github.com/soundstep/infuse.js" target="_blank">click here to see the infuse.js documentation and tests</a>.</p>

		<div class="subtitle">
			<h1>What is dependency injection?</h1>
			<a class="anchor" name="what-is-dependency-injection"></a>
		</div>

		<p><a href="http://en.wikipedia.org/wiki/Dependency_injection" target="_blank">Dependency injection</a> (DI) and <a href="http://en.wikipedia.org/wiki/Inversion_of_control" target="_blank">inversion of control</a> (IOC) are two terms often used in programming. Before explaining the benefits of dependency injection and how it is implemented in soma.js, here is a naive and hopefully accessible explanation.</p>

		<p>A dependency is the relationships between two objects. This relationship is often characterized by side effects that can be problematic and undesirable at times.</p>
		<p>Dependency injection is the process in which you are setting up rules that determine how dependencies are injected into an object automatically, as opposed to have hard-coded dependencies.</p>
		<p>An object "A" that needs an object "B" to work has a direct dependency to it. Code where the components are dependent on nearly everything else is a "highly-coupled code". The result is an application that is hard to maintain, with components that are hard to change without impacting on others.</p>
		<p>Dependency injection is an antidote for highly-coupled code. The cost required to wire objects together falls to next to zero.</p>
		<p>Dependency Injection is based on the following assumptions:</p>
		<ul>
			<li>Tight coupling of object implementations is always bad. </li>
			<li>A dependent function is never a good place to create a dependency.</li>
		</ul>
		<p>Consider the process of using the dependency injection pattern as centralizing knowledge of all dependencies and their implementations.</p>
		<p>A common dependency injection system has a separate object (an injector, often called container), that will instantiate new objects and populate them with what they needs: the dependencies. Dependency injection is a useful pattern to solve nested dependencies, as they can chain and be nested through several layers of the application.</p>
		<p>The benefits of dependency injection are:</p>
		<ul>
			<li>More re-usable components.</li>
			<li>Improved code maintenance.</li>
			<li>More testable components (mocking object).</li>
			<li>More readable code (reduction of boilerplate code).</li>
		</ul>

		<div class="subtitle">
			<h1>Using dependency injection in soma.js</h1>
			<a class="anchor" name="using-dependency-injection-in-somajs"></a>
		</div>

		<p>Dependency injection involves a way of thinking called the <a href="http://en.wikipedia.org/wiki/Hollywood_principle" target="_blank">Hollywood principle</a> "don't call us, we'll call you". This is exactly how it works in soma.js. Entities will ask for their dependencies using properties and/or constructor parameters.</p>
		<p>Using dependency injection implies creating rules, so the injector knows "what" and "how" to populate the dependencies.</p>
		<p>These are called "mapping rules". A rule is simply "mapping" a name (string) to an "object" (string, number, boolean, function, object, and so on). These mapping names are used to inject the corresponding objects in either a javascript constructor or a variable.</p>

		<div>
			<h3>A simple example</h3>
		</div>

		<p>In the following example, two plain javascript functions will be instantiated and injected.</p>
		<ul>
			<li>The Config function has a "debugMode" constructor parameter that happened to be an injection name (mapping rule associated), the corresponding boolean value will be injected into it.</li>
			<li>The Model function contains two constructor parameters that also are injection names. A config instance and a boolean value will be injected into the corresponding parameters.</li>
			<li>Two mapping rules are defined, one using the "mapClass" method used to map functions and one using the "mapValue" method used to map object that are not meant to be instantiated.</li>
			<li>In the last line, the Model instance is instantiated by the injector, which will take care of all the dependencies and nested dependencies needed.</li>
		</ul>

		<div class="highlight"><pre><span class="c1">// simple function that will be injected into the model</span>
<span class="c1">// a boolean dependency is injected</span>
<span class="kd">var</span> <span class="nx">Config</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">debugMode</span><span class="p">)</span> <span class="p">{</span>

<span class="p">};</span>
<span class="c1">// simple function in which a config instance and a boolean is injected</span>
<span class="kd">var</span> <span class="nx">Model</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">config</span><span class="p">,</span> <span class="nx">debugMode</span><span class="p">)</span> <span class="p">{</span>

<span class="p">};</span>
<span class="c1">// mapping rule: map the string &quot;config&quot; to the function Config</span>
<span class="nx">injector</span><span class="p">.</span><span class="nx">mapClass</span><span class="p">(</span><span class="s2">&quot;config&quot;</span><span class="p">,</span> <span class="nx">Config</span><span class="p">);</span>
<span class="c1">// mapping rule: map the string &quot;debugMode&quot; to a boolean</span>
<span class="nx">injector</span><span class="p">.</span><span class="nx">mapValue</span><span class="p">(</span><span class="s2">&quot;debugMode&quot;</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="c1">// instantiate the model using the injector</span>
<span class="kd">var</span> <span class="nx">model</span> <span class="o">=</span> <span class="nx">injector</span><span class="p">.</span><span class="nx">createInstance</span><span class="p">(</span><span class="nx">Model</span><span class="p">);</span>
</pre></div>

		<p><a href="http://plnkr.co/edit/C7m5qE7hYpUnQK6a9rNp"class="button icon edit" target="_blank">try it yourself</a></p>

		<div>
			<h3>Singleton injection</h3>
		</div>

		<p>By default, every single time the injector will find a dependency that needs to be instantiated (such as the Config function in the previous example), the injector will instantiate a new one. A third parameter can be used when defining the "mapClass" rule: the "singleton" parameter. The effect will be that the injector will instantiate the function the first time it is asked, and send that same instance when it is asked again. This is useful to share an instance with several other components.</p>

		<div class="highlight"><pre><span class="k">this</span><span class="p">.</span><span class="nx">injector</span><span class="p">.</span><span class="nx">mapClass</span><span class="p">(</span><span class="s2">&quot;config&quot;</span><span class="p">,</span> <span class="nx">Config</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span></pre></div>

		<p><a href="http://plnkr.co/edit/ZLv66EglhbBGyieujxG3"class="button icon edit" target="_blank">try it yourself</a></p>

		<div class="back"><a href="#">top</a></div>

	</section>

	<section>

		<div class="title">
			<h1>Entities</h1>
			<a class="anchor" name="entities"></a>
		</div>

		<p></p>
		<div class="back"><a href="#">top</a></div>

	</section>

	<section>

		<div class="title">
			<h1>Communication</h1>
			<a class="anchor" name="communication"></a>
		</div>

		<p></p>
		<div class="back"><a href="#">top</a></div>

	</section>

	<section>

		<div class="title">
			<h1>Command</h1>
			<a class="anchor" name="command"></a>
		</div>

		<p></p>
		<div class="back"><a href="#">top</a></div>

	</section>

	<section>

		<div class="title">
			<h1>Template</h1>
			<a class="anchor" name="template"></a>
		</div>

		<p></p>
		<div class="back"><a href="#">top</a></div>

	</section>

	<section>

		<div class="title">
			<h1>OOP</h1>
			<a class="anchor" name="oop"></a>
		</div>

		<p></p>
		<div class="back"><a href="#">top</a></div>

	</section>

	<section>

		<div class="title">
			<h1>Plugins</h1>
			<a class="anchor" name="plugins"></a>
		</div>

		<p></p>
		<div class="back"><a href="#">top</a></div>

	</section>

	<section>

		<div class="title">
			<h1>Tools</h1>
			<a class="anchor" name="tools"></a>
		</div>

		<p></p>
		<div class="back"><a href="#">top</a></div>

	</section>

	<section>

		<div class="title">
			<h1>Demos</h1>
			<a class="anchor" name="demos"></a>
		</div>

		<p></p>
		<div class="back"><a href="#">top</a></div>

	</section>

	<section>

		<div class="title">
			<h1>Tests</h1>
			<a class="anchor" name="tests"></a>
		</div>

		<p></p>
		<div class="back"><a href="#">top</a></div>

	</section>

	<section class="last">

		<div class="title">
			<h1>Browser support</h1>
			<a class="anchor" name="browser-support"></a>
		</div>

		<p></p>
		<div class="back"><a href="#">top</a></div>

	</section>


</div>

<script src="assets/js/libs/jquery-1.8.2.min.js"></script>
<script src="assets/js/libs/modernizr.js"></script>
<script src="assets/js/libs/scale.fix.js"></script>
<script src="assets/js/app.js"></script>

</body>
</html>